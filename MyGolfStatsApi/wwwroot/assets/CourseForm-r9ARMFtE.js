import{_ as f,c as m,a as t,t as g,w as h,b as i,v as a,F as v,r as y,d as x,e as C,f as k,u as N,g as V,h as _,o as c,i as w}from"./index-DuvsNflY.js";const S={name:"CourseForm",data(){return{course:{id:0,clubName:"",courseRating:0,tees:[],holes:[]},teeInput:"",isEdit:!1}},async created(){var d;const s=_(),e=this.$route.params.id;if(e&&e!=="new"){this.isEdit=!0;const n=s.getCourseById(e)||s.selectedCourse;if(n)this.course={...n,holes:Array.isArray(n.holes)?n.holes:[]};else{await s.fetchCourses();const l=s.getCourseById(e);l&&(this.course={...l})}}this.teeInput=((d=this.course.tees)==null?void 0:d.join(", "))||""},methods:{updateTees(){this.course.tees=this.teeInput.split(",").map(s=>s.trim()).filter(s=>s)},addHole(){const s=this.course.holes.length>0?Math.max(...this.course.holes.map(e=>e.holeNumber||0))+1:1;this.course.holes.push({holeNumber:s,par:null})},removeHole(s){this.course.holes.splice(s,1)},async onSubmit(){try{this.isEdit?(await N(this.course),alert("Golfbanan uppdaterad!")):(await V(this.course),alert("Ny golfbana tillagd!")),this.$router.push("/courses")}catch(s){console.error("Fel vid spara:",s),alert("Kunde inte spara golfbanan. "+s.message)}}}},H={class:"background-image"},I={class:"invisible-div golf-dark text-light pb-2 rounded"},U={class:"container mt-4 text-light"},B={class:"mb-3"},R={class:"mb-3"},T={class:"mb-3"},E={class:"mb-3"},F={class:"row"},j={class:"text-center"},A=["onUpdate:modelValue"],G={class:"text-center"},L=["onUpdate:modelValue"],M={class:"mt-auto"},q=["onClick"],D={class:"d-flex justify-content-end mt-2"};function K(s,e,d,n,l,r){const p=k("router-link");return c(),m("div",H,[t("div",I,[t("div",U,[t("h2",null,g(l.isEdit?"Redigera golfbana":"Lägg till golfbana"),1),t("form",{onSubmit:e[5]||(e[5]=h((...o)=>r.onSubmit&&r.onSubmit(...o),["prevent"]))},[t("div",B,[e[6]||(e[6]=t("label",{class:"form-label"},"Golfklubbens namn:",-1)),i(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>l.course.clubName=o),class:"form-control",required:""},null,512),[[a,l.course.clubName]])]),t("div",R,[e[7]||(e[7]=t("label",{class:"form-label"},"Course Rating:",-1)),i(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>l.course.courseRating=o),class:"form-control",type:"number",min:"0",step:"0.1",required:""},null,512),[[a,l.course.courseRating,void 0,{number:!0}]])]),t("div",T,[e[8]||(e[8]=t("label",{class:"form-label"},"Tees: (kommaseparerat)",-1)),i(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>l.teeInput=o),onBlur:e[3]||(e[3]=(...o)=>r.updateTees&&r.updateTees(...o)),class:"form-control",placeholder:"ex: Gul, Röd, Vit"},null,544),[[a,l.teeInput]])]),t("div",E,[e[15]||(e[15]=t("label",{class:"form-label"},"Hål: (lägg till minst ett)",-1)),t("div",null,[t("button",{type:"button",class:"btn btn-outline-light d-flex justify-content-center align-items-center mb-2",onClick:e[4]||(e[4]=(...o)=>r.addHole&&r.addHole(...o))},e[9]||(e[9]=[t("i",{class:"fas fa-plus small me-2"},null,-1),t("span",null,"Lägg till hål",-1)]))]),t("div",F,[(c(!0),m(v,null,y(l.course.holes,(o,b)=>(c(),m("div",{key:b,class:"col-lg-12 col-xl-6 col-xxl-4 mb-3 d-flex justify-content-center align-items-center gap-2 flex-wrap"},[t("div",j,[e[10]||(e[10]=t("label",{class:"form-label mb-1"},"Hål: ",-1)),i(t("input",{"onUpdate:modelValue":u=>o.holeNumber=u,class:"form-control form-control-sm text-center",type:"number",placeholder:"hålnummer"},null,8,A),[[a,o.holeNumber,void 0,{number:!0}]])]),t("div",G,[e[11]||(e[11]=t("label",{class:"form-label mb-1"},"Par: ",-1)),i(t("input",{"onUpdate:modelValue":u=>o.par=u,class:"form-control form-control-sm text-center",type:"number",placeholder:"par"},null,8,L),[[a,o.par,void 0,{number:!0}]])]),t("div",M,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm mt-2",onClick:u=>r.removeHole(b)},e[12]||(e[12]=[t("i",{class:"fas fa-trash"},null,-1)]),8,q)])]))),128)),t("div",D,[x(p,{to:"/courses",class:"btn btn-outline-secondary button-secondary"},{default:C(()=>e[13]||(e[13]=[w("Avbryt")])),_:1}),e[14]||(e[14]=t("button",{type:"submit",class:"btn btn-outline-primary ms-3 me-2"},"Spara",-1))])])])],32)])])])}const z=f(S,[["render",K]]);export{z as default};
