import{_ as h,c as n,a as t,t as g,w as v,b as u,v as d,d as c,F as y,r as x,e as _,f as k,g as C,u as N,h as V,i as w,o as i,j as S}from"./index-DSqYYxVn.js";const E={name:"CourseForm",data(){return{course:{id:0,clubName:"",courseRating:0,tees:[],holes:[]},teeInput:"",isEdit:!1}},async created(){var b;const s=w(),e=this.$route.params.id;if(e&&e!=="new"){this.isEdit=!0;const a=s.getCourseById(e)||s.selectedCourse;if(a)this.course={...a,holes:Array.isArray(a.holes)?a.holes:[]};else{await s.fetchCourses();const l=s.getCourseById(e);l&&(this.course={...l})}}this.teeInput=((b=this.course.tees)==null?void 0:b.join(", "))||""},methods:{updateTees(){this.course.tees=this.teeInput.split(",").map(s=>s.trim()).filter(s=>s)},addHole(){const s=this.course.holes.length>0?Math.max(...this.course.holes.map(e=>e.holeNumber||0))+1:1;this.course.holes.push({holeNumber:s,par:null})},removeHole(s){this.course.holes.splice(s,1)},async onSubmit(){try{this.isEdit?(await N(this.course),alert("Golfbanan uppdaterad!")):(await V(this.course),alert("Ny golfbana tillagd!")),this.$router.push("/courses")}catch(s){console.error("Fel vid spara:",s),alert("Kunde inte spara golfbanan. "+s.message)}}}},B={class:"background-image"},H={class:"invisible-div golf-dark text-light pb-2 rounded"},I={class:"container mt-4 text-light"},U={class:"mb-3"},R={class:"mb-3"},T={class:"mb-3"},j={class:"mb-3"},F={key:0,class:"form-label"},L={key:1,class:"form-label error"},A={key:2},G={class:"row"},M={class:"text-center"},q=["onUpdate:modelValue"],D={class:"text-center"},O=["onUpdate:modelValue"],K={key:0,class:"mt-auto"},P=["onClick"],z={class:"d-flex justify-content-end mt-2"};function J(s,e,b,a,l,r){const f=C("router-link");return i(),n("div",B,[t("div",H,[t("div",I,[t("h2",null,g(l.isEdit?"Redigera golfbana":"Lägg till golfbana"),1),t("form",{onSubmit:e[5]||(e[5]=v((...o)=>r.onSubmit&&r.onSubmit(...o),["prevent"]))},[t("div",U,[e[6]||(e[6]=t("label",{class:"form-label"},"Golfklubbens namn:",-1)),u(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>l.course.clubName=o),class:"form-control",required:""},null,512),[[d,l.course.clubName]])]),t("div",R,[e[7]||(e[7]=t("label",{class:"form-label"},"Course Rating:",-1)),u(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>l.course.courseRating=o),class:"form-control",type:"number",min:"0",step:"0.1",required:""},null,512),[[d,l.course.courseRating,void 0,{number:!0}]])]),t("div",T,[e[8]||(e[8]=t("label",{class:"form-label"},"Tees: (kommaseparerat)",-1)),u(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>l.teeInput=o),onBlur:e[3]||(e[3]=(...o)=>r.updateTees&&r.updateTees(...o)),class:"form-control",placeholder:"ex: Gul, Röd, Vit"},null,544),[[d,l.teeInput]])]),t("div",j,[l.isEdit?c("",!0):(i(),n("label",F,"Hål: (OBS! Lägg till minst ett, antal hål kan inte ändras i efterhand)")),l.isEdit?(i(),n("label",L,"OBS! Vid ändring av antal hål, skapa istället ny bana")):c("",!0),l.isEdit?c("",!0):(i(),n("div",A,[t("button",{type:"button",class:"btn btn-outline-light d-flex justify-content-center align-items-center mb-2",onClick:e[4]||(e[4]=(...o)=>r.addHole&&r.addHole(...o))},e[9]||(e[9]=[t("i",{class:"fas fa-plus small me-2"},null,-1),t("span",null,"Lägg till hål",-1)]))])),t("div",G,[(i(!0),n(y,null,x(l.course.holes,(o,p)=>(i(),n("div",{key:p,class:"col-lg-12 col-xl-6 col-xxl-4 mb-3 d-flex justify-content-center align-items-center gap-2 flex-wrap"},[t("div",M,[e[10]||(e[10]=t("label",{class:"form-label mb-1"},"Hål: ",-1)),u(t("input",{"onUpdate:modelValue":m=>o.holeNumber=m,class:"form-control form-control-sm text-center",type:"number",placeholder:"hålnummer"},null,8,q),[[d,o.holeNumber,void 0,{number:!0}]])]),t("div",D,[e[11]||(e[11]=t("label",{class:"form-label mb-1"},"Par: ",-1)),u(t("input",{"onUpdate:modelValue":m=>o.par=m,class:"form-control form-control-sm text-center",type:"number",placeholder:"par"},null,8,O),[[d,o.par,void 0,{number:!0}]])]),l.isEdit?c("",!0):(i(),n("div",K,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm mt-2",onClick:m=>r.removeHole(p)},e[12]||(e[12]=[t("i",{class:"fas fa-trash"},null,-1)]),8,P)]))]))),128)),t("div",z,[_(f,{to:"/courses",class:"btn btn-outline-secondary button-secondary"},{default:k(()=>e[13]||(e[13]=[S("Avbryt")])),_:1}),e[14]||(e[14]=t("button",{type:"submit",class:"btn btn-outline-primary ms-3 me-2"},"Spara",-1))])])])],32)])])])}const W=h(E,[["render",J]]);export{W as default};
